
@mixin arrow-color ($color, $direction, $border-color: inherit) {
  @if ($direction == top) {
    &:after {
      border-bottom-color: $color;
    }

    &:before {
      border-bottom-color: $border-color;
    }
  }
  @elseif ($direction == bottom) {
    &:after {
      border-top-color: $color;
    }

    &:before {
      border-top-color: $border-color;
    }
  }
  @elseif ($direction == right) {
    &:after {
      border-left-color: $color;
    }

    &:before {
      border-left-color: $border-color;
    }
  }
  @elseif ($direction == left) {
    &:after {
      border-right-color: $color;
    }

    &:before {
      border-right-color: $border-color;
    }
  }
}

@mixin arrow-offset ($offset, $direction) {
  @if ($direction == top and $offset >= 0) {
    &:after {
      left: $offset;
      right: auto;
    }

    &:before {
      left: $offset;
      right: auto;
    }
  }
  @elseif ($direction == top and $offset < 0) {
    &:after {
      left: auto;
      right: abs($offset);
    }

    &:before {
      left: auto;
      right: abs($offset);
    }
  }
  @elseif ($direction == left and $offset >= 0) {
    &:after {
      top: $offset;
      bottom: auto;
    }

    &:before {
      top: $offset;
      bottom: auto;
    }
  }
  @elseif ($direction == left and $offset < 0) {
    &:after {
      top: auto;
      bottom: abs($offset);
    }

    &:before {
      top: auto;
      bottom: abs($offset);
    }
  }
  @elseif ($direction == bottom) {
    @include arrow-offset($offset, top);
  }
  @elseif ($direction == right) {
    @include arrow-offset($offset, left);
  }
}

@mixin arrow-abs-offset ($offset, $direction) {
  position: absolute;

  @if ($direction == top and $offset >= 0) {
    left: $offset;
    right: auto;
  }
  @elseif ($direction == top and $offset < 0) {
    left: auto;
    right: abs($offset);
  }
  @elseif ($direction == left and $offset >= 0) {
    top: $offset;
    bottom: auto;
  }
  @elseif ($direction == left and $offset < 0) {
    top: auto;
    bottom: abs($offset);
  }
  @elseif ($direction == bottom) {
    @include arrow-offset($offset, top);
  }
  @elseif ($direction == right) {
    @include arrow-offset($offset, left);
  }
}

@mixin arrow ($size, $color, $direction, $offset, $border-size: 0, $border-color: inherit) {
  $m-size: $size + ($border-size * 2);

  position: relative;

  &:after,
  &:before {
    position: absolute;
    width: 0;
    height: 0;
    content: '';
  }

  @if ($direction == top) {
    &:after {
      bottom: 100%;
      margin-left: $size * -1;
      border-left: $size solid transparent;
      border-right: $size solid transparent;
      border-bottom: $size solid $color;
    }

    &:before {
      bottom: 100%;
      margin-left: $m-size * -1;
      border-left: $m-size solid transparent;
      border-right: $m-size solid transparent;
      border-bottom: $m-size solid $border-color;
    }
  }
  @elseif ($direction == bottom) {
    &:after {
      top: 100%;
      margin-left: $size * -1;
      border-left: $size solid transparent;
      border-right: $size solid transparent;
      border-top: $size solid $color;
    }

    &:before {
      top: 100%;
      margin-left: $m-size * -1;
      border-left: $m-size solid transparent;
      border-right: $m-size solid transparent;
      border-top: $m-size solid $border-color;
    }
  }
  @elseif ($direction == right) {
    &:after {
      left: 100%;
      margin-top: $size * -1;
      border-top: $size solid transparent;
      border-bottom: $size solid transparent;
      border-left: $size solid $color;
    }

    &:before {
      left: 100%;
      margin-top: $m-size * -1;
      border-top: $m-size solid transparent;
      border-bottom: $m-size solid transparent;
      border-left: $m-size solid $border-color;
    }
  }
  @elseif ($direction == left) {
    &:after {
      right: 100%;
      margin-top: $size * -1;
      border-top: $size solid transparent;
      border-bottom: $size solid transparent;
      border-right: $size solid $color;
    }

    &:before {
      right: 100%;
      margin-top: $m-size * -1;
      border-top: $m-size solid transparent;
      border-bottom: $m-size solid transparent;
      border-right: $m-size solid $border-color;
    }
  }

  @include arrow-offset($offset, $direction);
}
